\section{Photodetectors}\label{sec:photodetectors}

% We follow mostly Mandel & Wolf supplemented by Knight and Vogel.
The photodetectors let us probe the quantum-optical states via an electrical signal.
In the following, we will briefly review the results of the photodetection theory according to Refs.~\cite{Mandel1995,Wolf2021} and then take a closer look at the direct and balanced detector.

\subsection{Photoelectric effect}

The photoelectric effect describes the emission of electrons from an illuminated material.
Historically, it provided strong evidence for the existence of a light quantum, the photon, as the kinetic energy of the emitted electrons,
\begin{equation}
	E_k
	=
	E_\gamma
	-
	E_w
	\label{eq:photoelectric_effect}
	,
\end{equation}
does not depend on the intensity but on the frequency, $E_\gamma=\omega$, of the incident light minus some work energy, $E_w$.
The photoelectric effect relates the momentum spectrum of electrons with the frequency spectrum of photons and provides a mechanism for photodetection.
We present two kinds of photodetectors exploiting the photoelectric effect: the phototube and the photodiode.

A phototube (\Cref{fig:phototube}) comprises a metallic cathode and a biased anode parallel to the cathode.
Whenever photons with energy $\omega>E_w$, wherein $E_w$ is the work energy of the cathode, hit eject an electrode, the anode accelerates the emitted electrons away from the cathode.
The cathode is then in excess of positive charge carriers, creating a positive current, $I$.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/tikz/phototube}
    \caption{Schematic of a phototube, a vacuum tube utilizing the photoelectric effect for photodetection. Photons, $\gamma$, hit a metallic cathode and eject electrons, $e_-$, through the photoelectric effect. The anode is biased with a positive voltage, $V>0$, to attract the emitted electrons. The cathode is in excess of positive charge carriers, creating a positive electric current, $I>0$.}\label{fig:phototube}
\end{figure}
A photodiode is typically made of a PN-junction (\Cref{fig:photodiode}), a junction of a positively- (P) with a negatively-doped (N) semiconductor, supplemented by a contact on the P- and a contact on the N-doped semiconductor.
The contact at the P-doped semiconductor is negatively charged, creating a depletion layer between the PN-junction with no free charge carriers.
The P layer absorbs incident photons, $\gamma$, exciting electrons, which accelerate through the depletion layer towards the cathode, creating the photocurrent, $I$.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/tikz/photodiode}
    \caption{Schematic of a photodiode, a PN-junction. The P layer absorbs incident photons, $\gamma$, exciting electrons, $e_-$, and holes, $e_+$. The electrons are accelerated towards the anode (not shown), and the holes are accelerated towards the cathode, creating a photocurrent $I$.}\label{fig:photodiode}
\end{figure}
Contrary to the phototube, the excited electrons are not truly free but rather excited to an energy band, where they move with higher mobility through the semiconductor.
That said, the central idea of exciting photoelectrons through photon absorption to some higher energy, applies to both kinds of photodetectors~\cite[p.~128]{Cohen1992}.
We will oversee the subtile differences and assume a single photoelectron bound to a single atom in a unique ground state, $\ket{g}$, which is excited through photon absorption to some excited state continuum, $\ket{e}$.\footnote{Quantum models for photon absorption specific to semiconductors are found in Ref.~\cite{Hoyer2002} and Ref.~\cite{Rossi2002}.}

The Hamiltonian of an electron is
\begin{equation}
	\hat{H}_e
	=
	\frac{\vu{p}^2}{2m_e}
	+
	V(\vu{x})
	,
\end{equation}
wherein $V(\vu{x})$ denotes the binding potential.
We expect the ground state, $\ket{g}$, to be an energy eigenstate with eigenvalue, $E_g$.
In the ground state, $\ket{g}$, the electron is bound and dominated by the potential term in the Hamiltonian.
In an excited state, $\ket{e}$, the electron is approximately free and dominated by the kinetic term in the Hamiltonian.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/tikz/photoelectron}
    \caption{Energy level diagram of a photoelectron excited from a bound ground state, $\ket{g}$, with energy $E_g$ to a free excited state, $\ket{e}$, with energy $E_e$ by absorbing a photon with energy $E_\gamma$. To excite the electron from the ground state the photon must have at least the energy of the bandgap, $\min_eE_e-E_g$, wherein $\min_eE_e$ is the minimum energy of the excitation energy band.}\label{fig:photoelectron}
\end{figure}
\Cref{fig:photoelectron} shows the corresponding energy level diagram.
The ground state, $\ket{g}$, is unique and has the single energy $E_g$.
For the excited state, $\ket{e}$, an energy continuum exists with energies ranging from $\min_eE_e$ to $\max_eE_e$.
The difference of the lowest excited energy, $\min_eE_e$, and the ground state energy, $E_g$, is equivalent to the bandgap energy inside a semiconductor.
The transition from the ground to an excited state, $\ket{g}\to\ket{e}$, through photon absorption requires the photon energy, $\omega$, to be at least the bandgap energy, $\omega\geq\min_eE_e-E_g$.

\FloatBarrier
\subsection{Photocurrent operator}

% independent atoms in ensemble: Rocca 1971, Arnedo and Rocca 1974
% effective detector response including spatiality in z?
% renormalization of inefficiency when considering spatial detector

Ref.~\cite[p.~725]{Mandel1995} generalizes the differential probability for a single photoelectron excitation to the \gls{povm} of counting $m$ photoelectrons from infinitely many independent detector atoms from time $t$ to $t+T$ as\footnote{If we assume no sources present inside the detector, the fields are approximately free at the detector, and we can neglect the time-ordering in \cref{eq:photoelectron_povm_mean}~\cite[p.~183]{Vogel2006}.}
\begin{equation}
	\hat{P}_m(t,T)
	=
	\mathcal{T}_+
	\norder{
		\frac{1}{m!}
		\hat{I}(t,T)^m
		\exp\left\{
			-\hat{I}(t,T)
		\right\}
	}
	\label{eq:photoelectron_povm}
	,	
\end{equation}
wherein the photocurrent operator is equal to the integrated equal-time correlation function of the electric field,\footnote{In Ref.~\cite{Mandel1995} the photocurrent operator is equal to the equal-time correlation function of the Maxwell field. The electric and Maxwell field operator are connected by an unitary transformation.}
\begin{align}
	\hat{I}(t,T)
	=
	\eta
	\int_t^{t+T}\dd{t^\prime}
	\expval{
		\hat{E}^{(+)}(t^\prime)
		\hat{E}^{(-)}(t^\prime)
	}
	\label{eq:intensity_operator_integrated}
\end{align}
with detector efficiency constant $\eta$.
From a signal-processing perspective, it is more natural to define a detector response function, $\eta(t)$, which generalizes the measurement period $T$ and is experimentally accessible.
The convolved photocurrent operator,
\begin{align}
	\hat{I}(t)
	=
	\eta
	\int\dd{t^\prime}
	\eta(t^\prime)
	\expval{
		\hat{E}^{(+)}(t-t^\prime)
		\hat{E}^{(-)}(t-t^\prime)
	}
	\label{eq:intensity_operator_convolved}
	,
\end{align}
reduces to the integrated photocurrent operator, \cref{eq:intensity_operator_integrated}, when using a constant step response for the detector.
From here on, we use the \cref{eq:photoelectron_povm} with the convolved photocurrent operator, \cref{eq:intensity_operator_convolved}.

Using the generating function of the photoelectron \gls{povm}, \cref{eq:photoelectron_povm}, we find the average number of photoelectrons emitted at $t$ to be~\cite[p.~183]{Vogel2006}
\begin{equation}
	\overline{n(t)}
	=
	\sum_{m\in\mathbb{N}_0}
	m
	\expval{\hat{P}_m(t)}
	=
	\expval{\hat{I}(t)}
	\label{eq:photoelectron_povm_mean}
	.
\end{equation}
For the variance, we find~\cite[p.~736]{Mandel1995}
\begin{equation}
	\overline{\left(\Delta n(t)\right)^2}
	=
	\overline{n(t)}
	+
	\expval{\left(\Delta\hat{I}(t)\right)^2}
	\label{eq:photoelectron_povm_var}
	,
\end{equation}
wherein $\expval{\left(\Delta\hat{I}(t)\right)^2}$ denotes the variance of the bandwidth-limited intensity operator, \cref{eq:intensity_operator_convolved}, which can become negative indicating sub-Poissionian statistics for certain quantum states.

\FloatBarrier
\subsection{Direct detector}

The direct detector resembles a power or intensity measurement of the optical state, so it is also sometimes called a square-law detector.
\Cref{fig:detector_direct} presents the electronic schematic of a direct detector circuit.
A photodiode, PD, is reverse biased with voltage $-V_b<0$ to reduce the response time of the photodiode.
Under optical illumination, PD produces a photocurrent, $i(t)$, which in natural units is equal to the mean photoelectron number, \cref{eq:photoelectron_povm_mean}.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/circuitikz/detector-direct}
    \caption{Electronic schematic of a direct (intensity) detector comprising a photodiode and an operational amplifier in \gls{tia} configuration. The anode of the photodiode is reverse biased with voltage $-V_b<0$. The cathode of the photodiode emits the photocurrent $i$ and is connected to the inverting input of the operational amplifier. The non-inverting input of the operational amplifier is connected with ground, while the inverting input is coupled with feedback impedance $Z_f$ to the operational amplifier output voltage, $V$.}\label{fig:detector_direct}
\end{figure}
For a coherent state, $\ket{\alpha(t)}$, we find the mean photocurrent to be equal to the power of the signal, $\abs{\alpha(t)}^2$, convolved with the detector response function,
\begin{equation}
	i(t)
	=
	\int\dd{t^\prime}
	\eta(t^\prime)
	\abs{\alpha(t-t^\prime)}^2
	=
	\left(\eta\conv\abs{\alpha}^2\right)(t)
	\label{eq:detector_direct_photocurrent}
	.
\end{equation}
Assuming an ideal operational amplifier, the \gls{tia} outputs the voltage signal proportional to the feedback impedance
\begin{equation}
	V_p(t)
	=
	-
	Z_f
	i_p(t)
	.
\end{equation}
More realistically, we expect the response of the \gls{tia} to be characterized by a frequency response function $h$, and the output voltage is given by
\begin{equation}
	V_p(t)
	=
	\left(h\conv i\right)(t)
	=
	\left(h\conv\eta\conv\abs{\alpha}^2\right)(t)
	\label{eq:detector_direct_photovoltage}
	.
\end{equation}
In \cref{eq:detector_direct_photovoltage}, we find the absolute square of the signal to be convolved with the detector response function and the response function of the \gls{tia}, which can be summarized into one effective response function.

\FloatBarrier
\subsection{Balanced detector}

To obtain information about the quadratures of the signal, we can mix the optical signal with a \gls{lo} and measure the mixer outputs with two direct detectors in a balanced configuration.
\Cref{fig:detector_balanced_optics} shows a possible arrangement of electro-optical components for balanced detection.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/tikz/detector-balanced}
    \caption{Electro-optical setup of a balanced detector comprising a beam splitter and two photodetectors. The beam splitter superimposes the signal and \gls{lo} fields, $\alpha_s(t)$ and $\alpha_l(t)$, to the output fields $\alpha_\pm(t)$, each monitored by a photodiode with output current $i_\pm(t)$.}\label{fig:detector_balanced_optics}
\end{figure}
Assuming a perfectly balanced beam splitter over the optical bandwidths, we find the output amplitudes to be
\begin{equation}
	\alpha_\pm(t)
	=
	\frac{1}{\sqrt{2}}
	\left[
		\alpha_s(t)
		\pm
		\alpha_l(t)
	\right]
	\label{eq:detector_balanced_amplitudes}
	,
\end{equation}
where we choose the phase properties of the beam splitter for notational convenience.\footnote{In practice, the phase properties of the optical coupler, as well as the input fields, are not well-known, and must be corrected.}
\Cref{fig:detector_balanced_electronics} shows the electrical setup of the two photodiodes, PD1 and PD2.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/circuitikz/detector-balanced}
    \caption{Electronic schematic of a balanced (quadrature) detector comprising two photodiodes and an operational amplifier in \gls{tia} configuration. The cathode of the first photodiode, PD1, is reverse biased with voltage $+V_b>0$. The cathode of the second photodiode, PD2, is reverse biased with voltage $-V_b<0$. The cathode of PD1 and the anode of PD2 are connected to supply the difference photocurrent signal, $i(t)=i_+(t)-i_-(t)$, to the inverting input of the operational amplifier. The non-inverting input of the operational amplifier is connected to ground. The inverting input is coupled to the output through the feedback impedance $Z_f$. The \gls{tia} outputs a voltage signal $V(t)$ proportional to the difference photocurrent signal $i(t)$.}\label{fig:detector_balanced_electronics}
\end{figure}
PD1 and PD2 are both reverse biased to reduce the response time and connected to each other to directly produce a difference photocurrent signal,
\begin{equation}
	\begin{split}
		i(t)
		=
		i_+(t)
		-
		i_-(t)
		&=
		\left(
			\eta
			\conv
			\left[
				\abs{\alpha_+}^2
				-
				\abs{\alpha_-}^2
			\right]		
		\right)(t)
		\\
		&=
		\left(
			\eta
			\conv
			\left[
				\alpha_s
				\alpha_l^*
				+
				\alpha_s^*
				\alpha_l
			\right]
		\right)(t)
		\\
		&=
		\left(
			\eta
			\conv
			2\Re\left[
				\alpha_s
				\alpha_l^*
			\right]
		\right)(t)
		,
	\end{split}
	\label{eq:detector_balanced_photocurrent}
\end{equation}
wherein we used the linearity of the convolution and inserted \cref{eq:detector_balanced_amplitudes}.
We rewrite the product of the input and \gls{lo} signal to equal
\begin{equation}
	\begin{split}
		\alpha_s(t)
		\alpha_l(t)^*
		=
		\alpha(t)
		e^{-i(\omega_lt-\vartheta)}
		&=
		\int_{-\infty}^{+\infty}
		\frac{\dd{\omega}}{2\pi}
		\alpha(\omega)
		e^{+i\omega t}
		e^{-i(\omega_l t-\vartheta)}
		\\
		&=
		\int_{-\infty}^{+\infty}
		\frac{\dd{\omega}}{2\pi}
		\alpha(\omega+\omega_l)
		e^{+i(\omega t+\vartheta)}
		,
	\end{split}
	\label{eq:detector_balanced_signal_product}
\end{equation}
wherein we redefined the signal amplitude
\begin{equation}
	\alpha(t)
	=
	\alpha_s(t)
	g(t)^*
\end{equation}
to include the linewidth profile $g(t)$ of the \gls{lo} signal $\alpha_l(t)=g(t)e^{-i(\omega_lt-\vartheta)}$.\footnote{For instance, $g(t)\propto e^{-\gamma t/2}$ for a Lorentzian profile, see Ref.~\cite{Demtroeder2014}.}.
Inserting \cref{eq:detector_balanced_signal_product} into \cref{eq:detector_balanced_photocurrent}, we find
\begin{equation}
	\begin{split}
		i(t)
		=
		2\Re\left[
			\eta
			\conv
			(\alpha_s\alpha_l^*)
		\right](t)
		=
		2\Re
		\int_{-\infty}^{+\infty}
		\frac{\dd{\omega}}{2\pi}
		\eta(\omega+\omega_l)
		\alpha(\omega+\omega_l)
		e^{+i(\omega t+\vartheta)}
		.
	\end{split}
	\label{eq:detector_balanced_photocurrent_final}
\end{equation}
Assuming the detector response-function $\eta(\omega)$ to be constant over the detector bandwidth $B_d$, \cref{eq:detector_balanced_photocurrent_final} simplifies to
\begin{equation}
	i(t)
	\propto
	2\Re
	\int_{-B_d/2}^{+B_d/2}
	\frac{\dd{\omega}}{2\pi}
	\alpha(\omega+\omega_l)
	e^{+i(\omega t+\vartheta)}
	.
	\label{eq:detector_balanced_photocurrent_simpilfied}
\end{equation}
Comparing our final result for the photocurrent, \cref{eq:detector_balanced_photocurrent_final}, with the expectation value of the quadrature operator for the coherent state $\ket{\alpha(t)}$,
\begin{equation}
	\begin{split}
		\bra{\alpha(t)}
		\hat{X}(t)
		\ket{\alpha(t)}
		&=
		\int_{-\infty}^{+\infty}
		\frac{\dd{\omega}}{2\pi}
		\left[
			\beta(\omega)
			e^{-i\omega t}
			+
			\text{c.c.}
		\right]
		=
		2\Re
		\int_{-\infty}^{+\infty}
		\frac{\dd{\omega}}{2\pi}
		\beta(\omega)
		e^{-i\omega t}
		,
	\end{split}
\end{equation}
we note that the quadrature operator lacks the notion of a downconversion frequency and phase as well as a bandwidth.
Fortunately, we already derived a unitary frequency-conversion operator in our treatment of the phase modulator, \cref{eq:frequency_conversion_evolution}.
Transforming the quadrature operator with the frequency-conversion operator $\hat{U}_\text{FC}$,
\begin{equation}
	\begin{split}
		\hat{U}_\text{FC}^\dagger
		\hat{X}(t)
		\hat{U}_\text{FC}
		&=
		\int_{-\infty}^{+\infty}
		\frac{\dd{\omega}}{2\pi}
		\left[
			\hat{U}_\text{FC}^\dagger
			\hat{a}(\omega)
			\hat{U}_\text{FC}
			e^{-i\omega t}
			+
			\text{H.c.}
		\right]
		\\
		&=
		\sum_{m\in\mathbb{Z}}
		J_m(\theta)
		\int_{-\infty}^{+\infty}
		\frac{\dd{\omega}}{2\pi}
		\left[
			\hat{a}(\omega+m\omega_l)
			e^{-i(\omega t+m\vartheta)}
			+
			\text{H.c.}
		\right]
		,
	\end{split}
\end{equation}
creates not only the downconversion frequency $\omega_l$ but also all of its harmonics.
To remove the harmonics, we add a reservoir to the detection system, which we assume to be in the vacuum state~\footnote{In a more realistic model, we would assume the reservoir to be in a thermal state, which directly includes thermal noise into our signals.}, and couple it such that it absorbs all the energy outside the frequency interval $[-B_d/2,+B_d/2]$.
As a result, we discover the generalized quadrature operator,
\begin{equation}
	\begin{split}
		\hat{X}(t;\omega_l,B_d)
		&\propto
		\int_{-B_d/2}^{+B_d/2}
		\frac{\dd{\omega}}{2\pi}
		\left[
			\hat{a}(\omega+\omega_l)
			e^{-i(\omega t+\vartheta)}
			+
			\text{H.c.}
		\right]
		,
	\end{split}
\end{equation}
which for coherent states has expectation value equal to the photocurrent of our balanced detector, \cref{eq:detector_balanced_photocurrent_simpilfied}.