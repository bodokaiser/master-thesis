\section{Transmitter}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     

The transmitter encodes the symbols $\alpha[n]$ onto the coherent state $\ket{\alpha(t)}$ by performing pulse-shaping, modulation and attenuation as illustrated in \Cref{fig:transmitter}.
In the process, the signal is transformed from the digital over the analog electrical to the quantum optical domain.
\begin{figure}[htb]
	\centering
	\includestandalone{figures/tikz/transmitter}
	\caption{Block diagram showing the signal flow across the transmitter: Information is coded into complex-valued symbols $\alpha[n]$, the complex-valued symbols $\alpha[n]$ are converted to samples $\alpha^\prime[m]$ by upsampling and provided to the \gls{dsp}. The \gls{dsp} outputs the real-valued samples $x^\prime[m],p^\prime[m]$ which are converted to physical voltage signals $x^\prime(t),p^\prime(t)$ by digital-to-analog conversion and provided to the \gls{asp}. The \gls{asp} outputs the real-valued voltage signals $x(t),p(t)$ which are modulated onto a coherent state $\ket{\alpha^\prime(t)}$. Finally, \gls{osp} transforms $\ket{\alpha^\prime(t)}$ to $\ket{\alpha(t)}$.}\label{fig:transmitter}
\end{figure}
The pulse-shaping converts the symbols $\alpha[n]$ from the digital to the signal $u(t)$ in the analog domain.
At the modulator, the electrical signal $u(t)$ is modulated onto an optical carrier using a \gls{mzm}, yielding the classical optical signal $v(t)$.
Finally, a controlled attenuation moves the optical signal $v(t)$ to the quantum regime where an adequate description of the quantum signal is given in terms of the coherent state $\ket{\alpha(t)}$.

\subsection{Pulse-shaping}

\Cref{fig:pulse_shaping_block} depicts the analog and digital signal-processing of the pulse-shaping process.
\begin{figure}[htb]
	\centering
	\includestandalone{figures/circuitikz/pulse-shaping}
	\caption{Block diagram of the digital and analog signal-processing of the pulse-shaping: First, the symbols $\alpha[n]$ are upsampled with an upsampling factor of two yielding samples $\alpha^\prime[n]$. Second, a \gls{rrc} is applied to the samples $\alpha^\prime[n]$ yielding $u^\prime[n]$. Third, a \gls{dac} performs sample-and-hold to output the analog signal $u^\prime(t)$. Finally, an analog \gls{lp} filter smoothens the output of the \gls{dac}.}\label{fig:pulse_shaping_block}
\end{figure}
The symbols $\alpha[n]$ are first upsampled by an upsampling factor of two by adding one zero-valued samples in between the symbols, i.e.,
\begin{equation}
	\alpha^\prime[m]
	=
	\begin{cases}
		\alpha[m/2] & \text{if}\ m\mod2=0 \\
		0 & \text{otherwise}
	\end{cases}
	.
\end{equation}
For higher upsampling rates as many zero-valued samples are inserted in-between the original samples until the number of output samples equals the number of input samples times the upsampling factor.
Applying a digital filter to the upsampled symbols $\alpha^\prime[n]$, we set the additional samples such that there is a smoother transition between the symbols.
The combined process of upsampling and digital filtering is also referred to as (digital) pulse-shaping.
Typically, a first \gls{rrc} filter with transfer function~\cite[p.~33]{Nossek2015}
\begin{equation}
	h_\text{rrc}\left(f/f_s\right)
	=
	\begin{cases}
		1 & \abs{f/f_s}\leq(1-\alpha) \\
		\cos\left[\frac{\pi}{4\alpha}\left(\abs{f/f_s}-1+\alpha\right)\right] & 1-\alpha\leq\abs{f/f_s}\leq1+\alpha \\
		0 & \text{otherwise}
	\end{cases}
\end{equation}
is used as pulse-shaping filter yielding the pulse-shape samples $u^\prime[n]$.
Combining the first \gls{rrc} for pulse-shaping with a second \gls{rrc} matched-filter at the receiver minimizes intersymbol interference.
At the boundary of the digital and analog domain, the pulse-shape samples $u^\prime[n]$ are converted to an analog signal $u^\prime$ by a \gls{dac}.
The \gls{dac} performs a sample-and-hold operation equivalent to the convolution of the pulse-shaped samples with a rectangular pulse.
In the following, we factorize the transfer function of the \gls{dac} together with the transfer function of the \gls{lp}.
Furthermore, we assume that \gls{dac} is compensated in that the combined transfer function is approximately linear.

To illustrate the pulse-shaping, we show first consider a single symbol $\alpha[15]=1$ as depicted in \Cref{fig:pulse_shaping_unit_time}.
\begin{figure}[htb]
	\centering
	\includestandalone[width=\textwidth]{figures/pgfplots/pulse-shaping-unit-time}
	\caption{Pulse-shaping steps in the time domain for a single unit symbol.}\label{fig:pulse_shaping_unit_time}
\end{figure}
For complex symbols \Cref{fig:pulse_shaping_rand_time} shows the pulse-shaping.
\begin{figure}[htb]
	\centering
	\includestandalone[width=\textwidth]{figures/pgfplots/pulse-shaping-rand-time}
	\caption{Pulse-shaping steps in the time domain for random symbols from a complex normal distribution.}\label{fig:pulse_shaping_rand_time}
\end{figure}
Finally, it is of interest how the pulse-shaping affects the frequency domain.
\Cref{fig:pulse_shaping_freq} shows the logarithmic power spectral density of the different pulse-shaping steps for the unit symbol and random symbols.
\begin{figure}[htb]
	\centering
	\includestandalone[width=\textwidth]{figures/pgfplots/pulse-shaping-freq}
	\caption{Pulse-shaping steps in the frequency domain for unit symbol (orange) and random symbols from a complex normal distribution (blue.}\label{fig:pulse_shaping_freq}
\end{figure}

\FloatBarrier
\subsection{Modulation}

We modulate the signals $x(t)$ and $p(t)$ onto an optical carrier with frequency $\omega_c$ for two reasons:
First, the transmission properties of the channel dictates the frequency bands, for instance, \SI{1550}{\nano\meter} in standard telecommunication optical fiber, for efficient transmission.
Second, the orthogonality of sine and cosine, concerning a fixed frequency $\omega_c$, allows transmitting two real signals $x(t)$ and $p(t)$.
\begin{figure}[htb]
	\centering
	\includestandalone{figures/circuitikz/iq-modulator}
	\caption{Block diagram of an \gls{iq}-modulator.}\label{fig:iqmod}
\end{figure}
\Cref{fig:iqmod} shows a block diagram of an \gls{iq}-modulator.
A sinusoidal oscillator running at frequency $\omega_c$ is split into two branches with a relative phase shift of $\pi/2$ between the branches.
We define the upper branch as the phase reference.
The upper branch is mixed with the $p(t)$ signal yielding $p(t)\sin(\omega_ct)$.
The lower branch is mixed with the $x(t)$ signal yielding $x(t)\cos(\omega_ct)$.
Finally, upper and lower branch are added to
\begin{equation}
	x(t)
	\cos(\omega_ct)
	+
	p(t)
	\sin(\omega_ct)
	=
	\Re\left\{
		\alpha^\prime(t)
		e^{-i\omega_ct}
	\right\}
	\label{eq:passband_signal}.
\end{equation}
In the signal-processing literature, e.g., Ref.~\cite[p.~25]{Madhow2008}, $x(t)$ and $p(t)$ are referred to as baseband signals while, for instance, $x(t)\cos(\omega_ct)$ is referred to as a passband signal because $x(t)$ would pass a lowpass filter but $x(t)\cos(\omega_ct)$ would only pass a bandpass filter (around $\omega_c$).
\Cref{eq:passband_signal} suggests the definition of the complex baseband signal
\begin{equation}
	\alpha^\prime(t)
	=
	x(t)
	+
	ip(t)
\end{equation}
and the complex passband signal $\alpha^\prime(t)e^{-i\omega_ct}$.
While the physical signal is always real-valued, i.e., \cref{eq:passband_signal}, it is often convenient to work with the complex representation.
In the complex representation, \gls{iq}-modulation is equivalent to the multiplication of the complex baseband $\alpha^\prime(t)$ with $e^{-i\omega_ct}$.
The multiplication of the complex representation of a signal with a complex exponential $e^{-i\omega t}$ is also called up-conversion.


\begin{figure}[htb]
	\centering
	\includegraphics{figures/pstricks/transmitter}
	\caption{Optical transmitter setup.}\label{fig:optical_transmitter}
\end{figure}
\Cref{fig:optical_transmitter} shows the configuration of the fiber-optical transmitter.
An ultra-narrow-linewidth continuous-wave laser with center wavelength $\lambda_c=\SI{1550}{\nano\meter}$ is connected to a phase-symmetric and balanced 50:50 coupler which separates into an upper and lower branch.
The upper branch is coupled with a first \gls{mzm}, MZM1.
The lower branch is coupled with a second \gls{mzm}, MZM2.
MZM1 operates in the linear regime and is driven by the baseband signal $x(t)$ while MZM2 is driven by $p(t)e^{i\pi/2}$.
The complex exponential factor of $e^{i\pi/2}$ accounts for the relative phase shift between the branches and can be added in the digital domain before the pulse-shaping.
The output of MZM1 and MZM2 is coupled to a second fiber coupler.
The majority of the output power, \SI{99}{\percent}, of the second fiber coupler is feed into a third \gls{mzm}, MZM3.
The remaining minority of the output power of the second fiber coupler is monitored by a power meter photodiode, PD.
The output of PD is used as the control input for a power controller which controls MZM3.
The power controller operates on a timescale much larger than the modulation time scale and compensates for (thermal) power fluctuations of the laser while ensuring that the output power makes a description in terms of optical coherent state necessary.

% TODO: explain implementation of optical setup (in particular, show relevant quantum properties)