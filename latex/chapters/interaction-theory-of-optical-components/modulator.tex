\FloatBarrier
\section{Modulator}

Modulators are devices that change the properties of a periodic waveform, the carrier signal.
We are concerned with electro-optical modulators, i.e., modulators that change an optical carrier's waveform using the electro-optical effect.
In contrast to electro-optical modulators, acousto-optical modulators first transform an electric signal to an acoustic (mechanical) signal using a transducer.

Our setup uses the Mach-Zehnder modulator exclusively, but to understand the Mach-Zehnder modulator, we first need to understand the operating principle of an optical phase-shifter, in particular, the Pockels cell phase-shifter.

\FloatBarrier
\subsection{Pockels phase modulator}

The phase-shifter or phase modulator adds a phase of $\phi_2+\varphi+2(t)$ to a coherent state compared to a coherent state following the unmodulated path, see \Cref{fig:phase_shifter}.
The phase difference between the two coherent states is
\begin{align}
	\Delta\varphi(t)
	=
	\varphi_2(t)
	+
	\Delta\phi
	&&
	\Delta\phi
	=
	\phi_2
	-
	\phi_1
	.
\end{align}
It is common practice to only refer to the phase difference $\Delta\varphi(t)$ by defining an appropriate global phase reference or equivalently applying a global gauge transformation to remove the constant phase difference $\Delta\phi$.
If multiple phase modulators are present in parallel the constant phase difference $\Delta\phi$ becomes relevant but can be compensated electronically through the time-dependent part $\varphi_2(t)$.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/circuitikz/phase-shifter}
    \caption{Block diagram of a time-dependent phase-shifter: An initial coherent state $\ket{\alpha(t)}$ is split with equal power into an upper and lower branch. The lower branch corresponds to the coherent state $\ket{\frac{1}{\sqrt{2}}\alpha(t)e^{i\phi_1}}$ which accumulated a constant phase of $\phi_1$ due to the splitting and the lower optical path length. The upper branch passes a variable phase-shifter driven by the electric signal $x(t)$ which adds a phase $\phi_2+\varphi_2(t)$ compared to the initial coherent state.}\label{fig:phase_shifter}
\end{figure}
In the following, we focus on the physics of phase-shifters utilizing the Pockels effect and motivate the postulated phase relation between the in- and output coherent states.

Starting with a phenomenological approach, the Pockels effect - also known as the linear electro-optical effect - describes a linear change of the refractive index of a dielectric material in the presence of an external electric field $E$
\begin{equation}
	n(E)
	=
	n^{(0)}
	+
	n^{(1)}E
\end{equation}
wherein $n^{(0)}=n(0)$ is the refractive index without an external field and $n^{(1)}$ is a proportionality constant.
One way to create the external electric field $E$ is to place the Pockels dielectric inside a plate capacitor and apply a voltage $V$ to the plates separated by a distance $d$ which yields an electric field of $E=V/d$ neglecting boundary effects.
Such a configuration is known as Pockels cell and depicted in \Cref{fig:pockels_cell} where the external field is labeled $E_x(t)$.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/tikz/pockels-cell}
    \caption{Pockels cell of length $l$ and thickness $d$ embedded in a waveguide with constant dielectric permittivity $\varepsilon_1$: The dielectric permittivity of the Pockels cell $\varepsilon_2(t)$ depends on the electric field $E_x(t)$ across the Pockels cell plates. The optical field $E_z(t)$ enters the Pockels cell from the left and leaves it to the right as $E^\prime_z(t)$.}\label{fig:pockels_cell}
\end{figure}
Let us first consider a monochromatic electromagnetic wave of frequency $\omega_0$ propagating through a dielectric of length $l$ with refractive index $n_1^{(0)}=\sqrt{\varepsilon_1}$.
Inside the dielectric, the wave propagates with phase velocity $v_p=1/n_1^{(0)}$ and the transmit time is $T_1=l/v_{1p}$ such that it accumulates a total phase shift of
\begin{equation*}
	\phi_1
	=
	\omega_0T_1
	=
	2\pi f\frac{l}{v_{1p}}
	=
	2\pi\frac{n_1^{(0)}l}{\lambda_0}
\end{equation*}
where $\lambda_0=1/f$ is the vacuum wave length and $f=\omega/(2\pi)$ the wave frequency.
If we now consider the same monochromatic electromagnetic wave propagating through a Pockels dielectric of length $l$ it will accumulate a total phase shift of
\begin{equation}
	\phi_2+\varphi_2(t)
	=
	\omega_0T_2
	=
	2\pi f\frac{l}{v_{2p}}
	=
	2\pi
	\left[
		\frac{n_2^{(0)} l}{\lambda_0}
		+
		\frac{n_2^{(1)}El}{\lambda_0}
	\right]
\end{equation}
leading to the phase parameters
\begin{align}
	\varphi_2(t)
	=
	2\pi\frac{n_2^{(1)}E}{\lambda_0}l
	&&
	\Delta\phi
	=
	2\pi\frac{n_2^{(0)}-n_1^{(0)}}{\lambda_0}l
	.
\end{align}
Extending our discussion to wave packets, we need to replace the phase velocity $v_p$ with the group velocity $v_g$ which relates to the refractive index via~\cite[p.~211]{Jackson2007}
\begin{equation}
	v_g(\omega)
	=
	\left[
		n
		+
		\omega
		\pdv{n}{\omega}
	\right]^{-1}
	.
\end{equation}
and we find for the phase difference
\begin{equation}
	\varphi_2(t)
	=
	\dots
\end{equation}

On a more fundamental level, we need want investigate why we can consider the modulation to be de-facto DC, i.e., why we can neglect the time-dependency of the Pockels field.
We achieve this by noting that the refractive index $n(\omega)$ for a medium with electric permittivity $\varepsilon(\omega)$, magnetic permeability $\mu(\omega)$ and chirality $\vb{\xi}$.
\begin{equation}
	n(\omega)
	=
	\sqrt{\varepsilon(\omega)\mu(\omega)}
\end{equation}
where for non-magnetic media $\mu(\omega)=1$ which we will assume here.
The electric permittivity can be expressed expanded for time-invariant media to\cite[eq.~(16)]{Rerat2020}
\begin{equation}
	\varepsilon(\omega)
	=
	1
	+
	\chi
\end{equation}

According to Ref.~\cite[p.~14]{Murti2014}, the Pockels effect is second-order in the electric susceptibility $\chi_{ijk}^{(2)}$ and the corresponding macroscopic polarization is symbollically
\begin{equation}
	P_i^{(2)}
	=
	\varepsilon_0
	\chi_{ijk}^{(2)}
	E^jE^k
\end{equation}
where one of the electric fields is applied to the Pockels cell and the other is the optical field propagating through the Pockels cell.
In the time-domain, the macroscopic polarization explicitly reads~\cite[p.~17]{Murti2014}
\begin{equation}
	P_i^{(2)}(t)
	=
	\varepsilon_0
	\int_{-\infty}^t\dd{t_1^\prime}
	\int_{-\infty}^t\dd{t_2^\prime}
	G^{(2)}(t-t_1^\prime,t-t_2^\prime)
	E^j(t-t_1^\prime)
	E^k(t-t_2^\prime)
\end{equation}
where $G^{(2)}$ is a response function.
Inserting the frequency representation of the electric fields
\begin{equation}
	E^i(t)
	=
	\int_\mathbb{R}\dd{\omega}
	E^i(\omega)e^{-i\omega t}
	,
\end{equation}
the macroscopic polarization becomes~\cite[p.~20]{Murti2014}
\begin{equation}
	P_i^{(2)}(t)
	=
	\varepsilon_0
	\int_\mathbb{R}\dd{\omega_1}
	\int_\mathbb{R}\dd{\omega_2}
	\chi_{ijk}^{(2)}(\omega_1,\omega_2)
	E^j(\omega_1)
	E^k(\omega_2)
	\delta^{(1)}(\omega_1+\omega_2)
	e^{-i(\omega_1+\omega_2)t}
	.
\end{equation}
For non-magnetic dielectric media, the refractive index is given by
\begin{equation}
	n(\omega)
	=
	\sqrt{\varepsilon(\omega)}
\end{equation}


\FloatBarrier
\subsection{Mach-Zehnder (amplitude)}

\Cref{fig:mach_zehnder_modulator} shows an embodiment of a \gls{mzm} using free-ray components comprising two beam splitters BS1 and BS2, two mirrors M1 and M2, and two variable phases shifters with phase shift $+\varphi/2$ respective $-\varphi/2$ (push-pull configuration).
Beam splitter BS1 combines and distributes the input fields $E_1,E_2$ equally among the interferometer arms.
In the upper arm, the beam is phase-shifted by $+\varphi/2$ before being directed with mirror M1 onto BS2.
In the lower arm, the beam is directed with mirror M2 into a phase-shifter with phase-shift $-\varphi/2$ and then directed into the other input of BS2.
Beam splitter BS2 recombines both inputs into outputs $E_1^\prime,E_2^\prime$.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/pstricks/mach-zehnder-modulator}
    \caption{Embodiment of the \gls{mzm} using free-ray components. The optical inputs $E_1,E_2$ are split into an upper and lower beam path by beam splitter BS1. The phase of each arm is modulated by $\varphi_1$ respective $\varphi_2$ and then recombined by beam splitter BS2 which outputs $E_1^\prime,E_2^\prime$.}\label{fig:mach_zehnder_modulator}
\end{figure}
We found in \Cref{sec:beam_splitter} that a real beam splitter is described by the scattering parameters of a complex $4\times 4$ matrix.
Assuming, an ideal balanced beam splitter, we still have three \gls{dof} per beam splitter.
To make any progress, we assume an ideal symmetric beam splitter described by \cref{eq:beam_splitter_unitary_transform_balanced_qo}, and that there is no phase difference between the interferometer arms.
In this case, the complex output fields $\mathcal{E}_1^\prime,\mathcal{E}_2^\prime$ relate to the complex input fields $\mathcal{E}_1,\mathcal{E}_2$ via
\begin{equation}
    \begin{pmatrix}
        \mathcal{E}_1^\prime
        \\
        \mathcal{E}_2^\prime
    \end{pmatrix}
    =
    \frac{1}{\sqrt{2}}
    \begin{pmatrix}
        i & 1
        \\
        1 & i
    \end{pmatrix}
    \begin{pmatrix}
        e^{i\pi} & 0
        \\
        0 & e^{-i\varphi/2}
    \end{pmatrix}
        \begin{pmatrix}
        e^{+i\varphi/2} & 0
        \\
        0 & e^{i\pi}
    \end{pmatrix}
    \frac{1}{\sqrt{2}}
    \begin{pmatrix}
        1 & i
        \\
        i & 1
    \end{pmatrix}
    \begin{pmatrix}
        \mathcal{E}_1
        \\
        \mathcal{E}_2
    \end{pmatrix}
    \label{eq:mzm_transform}
\end{equation}
which can be understood as applying the linear transformations corresponding to the optical instruments from right to left.\footnote{The rows of the BS2 matrix are exchanged to keep consistent with the labels.}
Performing the matrix multiplication, the transformation linking complex input and output fields simplifies to
\begin{align}
    U_\text{MZM}(\varphi)
    &=
    \frac{1}{2}
    \begin{pmatrix}
        i & 1
        \\
        1 & i
    \end{pmatrix}
    \begin{pmatrix}
        ie^{+i\varphi/2} & 0
        \\
        0 & ie^{-i\varphi/2}
    \end{pmatrix}
    \begin{pmatrix}
        1 & i
        \\
        i & 1
    \end{pmatrix}
    \\
    &=
    \frac{i}{2}
    \begin{pmatrix}
        i & 1
        \\
        1 & i
    \end{pmatrix}
    \begin{pmatrix}
        e^{+i\varphi/2} & ie^{+i\varphi/2}
        \\
        ie^{-i\varphi/2} & e^{-i\varphi/2}
    \end{pmatrix}
    \\
    &=
    \frac{i}{2}
    \begin{pmatrix}
        ie^{+i\varphi/2}+ie^{-i\varphi/2} & -e^{+i\varphi/2}+e^{-i\varphi/2}
        \\
        e^{+i\varphi/2}-e^{-i\varphi/2} & ie^{+i\varphi/2}+ie^{-i\varphi/2}
    \end{pmatrix}
    \\
    &=
    -
    \begin{pmatrix}
        \cos(\varphi/2) & -\sin(\varphi/2)
        \\
        \sin(\varphi/2) & \cos(\varphi/2)
    \end{pmatrix}
    \label{eq:mzm_rotation},
\end{align}
resembling a rotation, i.e., the \gls{mzm} effectively mixes the input fields by $\varphi$.

In a more general treatment only assuming the \gls{mzm} to be lossless, every component is represented by a unitary transformation.
As the unitary transformations represent a group $U(2)$, the multiplication is closed in the sense that the result of a multiplication is also in the group $U(2)$.
From our discussion of the beam splitter, \cref{eq:beam_splitter_unitary_transform}, we know that an element of $U(2)$ can be parametrized by
\begin{equation}
    e^{i\Lambda}
    \begin{pmatrix}
        e^{+i\Phi} & 0
        \\
        0 & e^{-i\Phi}
    \end{pmatrix}
    \begin{pmatrix}
        \cos\Theta & \sin\Theta
        \\
        -\sin\Theta & \cos\Theta
    \end{pmatrix}
    \begin{pmatrix}
        e^{+i\Psi} & 0
        \\
        0 & e^{-i\Psi}
    \end{pmatrix}
    \in U(2)
\end{equation}
which compared to \cref{eq:mzm_rotation} is the same for $\Lambda=\pi,\Theta=\varphi/2,\Psi=0=\Phi$.
The parameter choice $\Psi=\Phi$ highlights that our model makes very strongs assumptions regarding the phase properties of the \gls{mzm} which are not realistic.
In fact, finding an operating point of the \gls{mzm} where the phase properties are well-controlled involves quite some engineering.

As our simplified transformation of \cref{eq:mzm_rotation} is not able to explain the sensible phase dependence of the output fields, we are going to neglect the global phase of $-1=e^{i\pi}$ as it does not contribute to the following insights.

\subsubsection{Single-mode and classic}

So far, we assumed non-zero input fields which will become important for the following quantum treatment.
Yet, the purpose of the \gls{mzm} is to perform amplitude modulation of a single input.
Setting $E_2=0,E=E_1,E^\prime=E_2^\prime$, the complex output fields become
\begin{equation}
    \begin{pmatrix}
        \mathcal{E}_1^\prime
        \\
        \mathcal{E}_2^\prime
    \end{pmatrix}
    =
    \mathcal{E}
    \begin{pmatrix}
        \cos(\varphi/2)
        \\
        \sin(\varphi/2)
    \end{pmatrix}
    \label{eq:mzm_classic_sm}.
\end{equation}
One of the outputs, e.g., $E_1^\prime$, is usually monitored with a photodiode as part of a feedback loop to find an operating point of the phases.
The other field is further processed or transmitted.

One further note needs to be done on the modulation: \cref{eq:mzm_classic_sm} says that we have a non-linear modulation with respect to $\varphi$.
Therefore, we perform a small-angle approximation near the operating point of our \gls{mzm} which gives us
\begin{equation}
    E^\prime(t)
    =
    E(t)\sin(\varphi)
    =
    E(t)\varphi+\mathcal{O}(\varphi^2)
\end{equation}
i.e., an amplitude modulation of the initial electric field input $E(t)$.

\subsubsection{Single-mode and quantum}

Our discussion of the \gls{mzm} so far was limited to the classical case.
For the generalization to the quantum case, we need to replace the complex electrical field amplitudes $\mathcal{E}$ with the single-mode annihilation operator $\hat{a}$ in \cref{eq:mzm_transform}
\begin{equation}
    \begin{pmatrix}
        \hat{a}_1^\prime
        \\
        \hat{a}_2^\prime
    \end{pmatrix}
    =
    \begin{pmatrix}
        \cos(\varphi/2) & -\sin(\varphi/2)
        \\
        \sin(\varphi/2) & \cos(\varphi/2)
    \end{pmatrix}
    \begin{pmatrix}
        \hat{a}_1
        \\
        \hat{a}_2
    \end{pmatrix}
    \label{eq:mzm_operator_transform_sm}
\end{equation}
where it is strictly necessary to include both in- and outputs to further satisfy the commutation relation of the transformed operators $\hat{a}^\prime$.\footnote{If we drop one of the operators, we would find $\comm{\hat{a}^\prime}{\left(\hat{a}^\prime\right)^\dagger}=\pm\sin(\varphi/2)\cos(\varphi/2)\comm{\hat{a}}{\hat{a}^\dagger}<1$.}

The quantum equivalent to a non-zero field with a zero field input is the tensor product of a coherent and the vacuum state $\ket{\alpha,0}$.
To obtain the corresponding output state, we need to invert \cref{eq:mzm_operator_transform_sm} by noting that $U_\text{MZM}\in O(2)$ is an orthogonal transform for which the inverse is simply the transpose
\begin{equation}
    \begin{pmatrix}
        \hat{a}_1
        \\
        \hat{a}_2
    \end{pmatrix}
    =
    \begin{pmatrix}
        \cos(\varphi/2) & \sin(\varphi/2)
        \\
        -\sin(\varphi/2) & \cos(\varphi/2)
    \end{pmatrix}
    \begin{pmatrix}
        \hat{a}_1^\prime
        \\
        \hat{a}_2^\prime
    \end{pmatrix}
    =
    \begin{pmatrix}
        \hat{a}_1^\prime\cos(\varphi/2) + \hat{a}_2^\prime\sin(\varphi/2)
        \\
       -\hat{a}_1^\prime\sin(\varphi/2) + \hat{a}_2^\prime\cos(\varphi/2)
    \end{pmatrix}
\label{eq:mzm_operator_transform_inverse_sm}.
\end{equation}
Now, we can find the output state by replacing the annihilation and creation operators in the displacement operator describing the input state~\cite[p.~134]{Haroche2006}
\begin{align}
    \hat{D}_1(\alpha)
    =&
    \exp\left\{\alpha\hat{a}_1^\dagger-\alpha^*\hat{a}_1\right\}
    \\
    =&
    \exp\biggl\{
        \alpha\left[(\hat{a}_1^\prime)^\dagger\cos(\varphi/2) + (\hat{a}_2^\prime)^\dagger\sin(\varphi/2)\right]
        \\
        -&
        \alpha^*\left[\hat{a}_1^\prime\cos(\varphi/2) + \hat{a}_2^\prime\sin(\varphi/2)\right]
    \biggr\}
    \\
    =&
    \exp\left\{
        \left(\alpha\cos(\varphi/2)\right)(\hat{a}_1^\prime)^\dagger
        -
        \left(\alpha\cos(\varphi/2)\right)^*\hat{a}_1^\prime
    \right\}
    \\
    &\exp\left\{
        \left(\alpha\sin(\varphi/2)\right)(\hat{a}_2^\prime)^\dagger
        -
        \left(\alpha\sin(\varphi/2)\right)^*\hat{a}_2^\prime
    \right\}
    \\
    =&
    \hat{D}^\prime_1\left(\alpha\sin(\varphi/2)\right)
    \hat{D}^\prime_2\left(\alpha\cos(\varphi/2)\right)
\end{align}
and thereby express the output state via
\begin{align}
    \ket{\alpha,0}
    &=
    \hat{D}_1(\alpha)
    \ket{0,0}
    \\
    &=
    \hat{D}^\prime_1\left(\alpha\sin(\varphi/2)\right)
    \hat{D}^\prime_2\left(\alpha\cos(\varphi/2)\right)
    \ket{0,0}
    \\
    &=
    \ket{\alpha\sin(\varphi/2),\alpha\cos(\varphi/2)}
    .
\end{align}
We recognize the output state as the tensor product of two coherent states.

In \cref{eq:operator_number_coherent_mom1_sm} we gave the expectation value of a general coherent state $\ket{\alpha}$, substituting the output states we find
\begin{align}
    \expval{\alpha\sin(\varphi/2)}{\hat{E}(t)}
    &=
    E(0)\sin(\varphi/2)
    \\
    \expval{\alpha\cos(\varphi/2)}{\hat{E}(t)}
    &=
    E(0)\cos(\varphi/2)
\end{align}
in agreement with the classical prediction.
In distinction to the classical prediction, the coherent output states have an intrinsic uncertainty of the quantum vacuum noise $\mathcal{E}_0$.
Classically, we would expect the beam splitter to also divide the uncertainty but this is in contradiction to the observation that a coherent state always has uncertainty $\mathcal{E}_0$.
Shapiro~\cite{Shapiro2009} offers a resolution to this puzzle: the missing noise is collected by the noise of the second vacuum input which is non-zero.

\subsubsection{Continuous-mode and classic}

For the continuous-mode description of the \gls{mzm}, we need to consider the spectrum of the input fields
\begin{equation}
    \mathcal{E}(t)
    =
    \int\dd{\omega}\mathcal{E}(\omega)e^{i\omega t}
\end{equation}
In general, the parameters of the unitary transformation describing the beam splitter are frequency-dependent
\begin{equation}
    \begin{pmatrix}
        \mathcal{E}_1^\prime(\omega)
        \\
        \mathcal{E}_2^\prime(\omega)
    \end{pmatrix}
    =
    e^{i\Lambda(\omega)}
    \begin{pmatrix}
        e^{+i\Phi(\omega)} & 0
        \\
        0 & e^{-i\Phi(\omega)}
    \end{pmatrix}
    \begin{pmatrix}
        \cos\Theta(\omega) & \sin\Theta(\omega)
        \\
        -\sin\Theta(\omega) & \cos\Theta(\omega)
    \end{pmatrix}
    \begin{pmatrix}
        e^{+i\Psi(\omega)} & 0
        \\
        0 & e^{-i\Psi(\omega)}
    \end{pmatrix}
    \begin{pmatrix}
        \mathcal{E}_1(\omega)
        \\
        \mathcal{E}_2(\omega)
    \end{pmatrix}
\end{equation}
Neglecting phases this simplifies to
\begin{equation}
    \begin{pmatrix}
        \mathcal{E}_1^\prime(\omega)
        \\
        \mathcal{E}_2^\prime(\omega)
    \end{pmatrix}
    =
    \begin{pmatrix}
        \cos\Theta(\omega) & \sin\Theta(\omega)
        \\
        -\sin\Theta(\omega) & \cos\Theta(\omega)
    \end{pmatrix}
    \begin{pmatrix}
        \mathcal{E}_1(\omega)
        \\
        \mathcal{E}_2(\omega)
    \end{pmatrix}
\end{equation}
and in the time-domain
\begin{equation}
    \begin{pmatrix}
        \mathcal{E}_1^\prime(t)
        \\
        \mathcal{E}_2^\prime(t)
    \end{pmatrix}
    =
    \int\dd{\omega}e^{i\omega t}
    \begin{pmatrix}
        \cos\Theta(\omega) & \sin\Theta(\omega)
        \\
        -\sin\Theta(\omega) & \cos\Theta(\omega)
    \end{pmatrix}
    \begin{pmatrix}
        \mathcal{E}_1(\omega)
        \\
        \mathcal{E}_2(\omega)
    \end{pmatrix}
\end{equation}

\subsubsection{Continuous-mode and quantum}
