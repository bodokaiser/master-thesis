\section{Transmitter}

\subsection{Coherent light source}

% Short introduction into Scully-Lamb laser model
% Alternative argument of why a laser should emit coherent states
% Continuous-mode coherent state

\subsection{Mach-Zehnder modulator}

The \gls{mzm} is one of the key building blocks of the coherent state transmitter.
It enables phase and amplitude modulation via common and differential driving of two phase modulators.
We postpone analysis of a particular implementation of such phase modulators, the Pockels cell, including their time effects, to a later section and assume the phase modulators to be passive, time-independent devices for now.

\begin{figure}[htb]
	\centering
	\includestandalone{figures/pstricks/mzi-symmetric}
	\caption{Free-space setup of a symmetric \gls{mzm}: The input light mode $\hat{a}_1$ enters a first beam splitter BS1 from the left. A vacuum light mode $\hat{a}_2$ enters BS2 from the top. The transformed mode $\hat{a}_1^\prime$ and $\hat{a}_2^\prime$ exit BS1 to the right and the bottom. A first phase shifter and first mirror M1, right to BS1, add a relative phase of $\varphi_1+\pi$ from mode $\hat{a}_1$ to $\hat{a}_1^{\prime\prime}$. Below BS1, a second mirror M2 directs the light to a right second phase shifter, both adding a relative phase of $\varphi_2+\pi$ from mode $\hat{a}_2^\prime$ to $\hat{a}_2^{\prime\prime}$. A second beam splitter BS2 transforms the input modes $\hat{a}_1^{\prime\prime}$ and $\hat{a}_2^{\prime\prime}$ to the output modes $\hat{a}_1^{\prime\prime\prime}$ and $\hat{a}_2^{\prime\prime\prime}$.}\label{fig:mzi_symmetric}
\end{figure}
\Cref{fig:mzi_symmetric} shows a free-space optics setup of a symmetric \gls{mzi} with one signal input; the other input being in the vacuum state).
The most crucial components of the \gls{mzi} are a splitter, a coupler, and two independent phase modulators.
The splitter divides the input light into two branches.
Each branch adds a relative phase shift using an independent phase modulator, i.e., $\phi_1$ and $\phi_2$.
The coupler recombines both branches into two outputs.
For our free-space setup, two cubic beam splitters implement the splitter and the coupler.
For additional beam alignment, our free-space setup utilizes two mirrors.

Finding the transformation of the annihilation operators at each stage of the \gls{mzi} is sufficient to find the quantum input-output relations.
Idealizing the symmetric \gls{mzi}'s passive components as lossless allows relating the annihilation operators by two-dimensional unitary matrices.
We label the input annihilation operators $\hat{a}_1,\hat{a}_2$ and the output annihilation operators $\hat{a}_1^{\prime\prime\prime},\hat{a}_2^{\prime\prime\prime}$.
The annihilation operators after splitting and before (after) phase shifting are denoted by two (three) primes, i.e., $\hat{a}_1^{\prime},\hat{a}_2^{\prime}$ and $\hat{a}_1^{\prime\prime},\hat{a}_2^{\prime\prime}$.
Going backwards through the transformations from the output to the input annihilation operators
\begin{equation}
	\begin{split}
		\vb{\hat{a}}^{\prime\prime\prime}
		=
		U_\text{BS2}
		\vb{\hat{a}}^{\prime\prime}
		=
		U_\text{BS2}
		U_\text{PS}
		\vb{\hat{a}}^{\prime}
		=
		U_\text{BS2}
		U_\text{PS}
		U_\text{BS1}
		\vb{\hat{a}}
		=
		U_\text{MZM}
		\vb{\hat{a}}
	\end{split}
\end{equation}
we find the symmetric \gls{mzi}'s unitary matrix transform $U_\text{MZM}$ to be equal to the matrix product of the second beam splitter's, the phase shifts', and the first beam splitter's unitary matrix transform  $U_\text{BS2}U_\text{PS}U_\text{BS1}$.

A cubic beam splitter with a single dielectric layer has the unitary matrix transform as given for $U_\text{BS1}$~\cite[p.~139]{Gerry2005}.
\begin{align}
	U_\text{BS1}
	&=
	\frac{1}{\sqrt{2}}
	\begin{pmatrix}
		1 & i \\
		i & 1
	\end{pmatrix}
	&
	U_\text{PS}
	&=
	\begin{pmatrix}
		ie^{i\phi_1} & 0 \\
		0 & ie^{i\phi_2}
	\end{pmatrix}
	&
	U_\text{BS2}
	&=
	\frac{1}{\sqrt{2}}
	\begin{pmatrix}
		i & 1 \\
		1 & i
	\end{pmatrix}
\end{align}
The off-diagonal elements of $U_\text{BS1}$, $i/\sqrt{2}$, account for the phase-shift due to the reflection at the diagonal of the cubic beam splitter.
For the second beam splitter the rows of the matrix transform $U_\text{BS2}$ are exchanged because we labeled the output indices for consistency with the input labels.
The phase shift transform $U_\text{PS}$ includes the phase shifts due to the phase modulator $\phi_1,\phi_2$ and the reflection at the mirror M1 respective M2, $\pi$.

Performing the matrix multiplication, we find the matrix transform of the symmetric \gls{mzi} to be
\begin{equation}
	U_\text{MZM}
	=
	e^{i\frac{\phi_1+\phi_2}{2}+i\pi}
	\begin{pmatrix}
		\cos(\frac{\phi_2-\phi_1}{2}) & \sin(\frac{\phi_2-\phi_1}{2}) \\
		-\sin(\frac{\phi_2-\phi_1}{2}) & \cos(\frac{\phi_2-\phi_1}{2})
	\end{pmatrix}
	.
\end{equation}
We define the common mode $\phi_+$ and differential mode $\phi_-$ phases
\begin{align}
	\phi_+
	&=
	\phi_2
	+
	\phi_1
	+
	2\pi
	&
	\phi_-
	&=
	\phi_2-\phi_1
\end{align}
for which the matrix transform of the symmetric \gls{mzi} simplifies to
\begin{equation}
	U_\text{MZM}
	=
	e^{i\phi_+/2}
	\begin{pmatrix}
		\cos(\phi_-/2) & \sin(\phi_-/2) \\
		-\sin(\phi_-/2) & \cos(\phi_-/2)
	\end{pmatrix}
\end{equation}
comprising a phase modulation proportional to the common mode phase $\phi_+$ and an amplitude modulation dependent on the differential mode phase $\phi_-$.
The matrix transform of the symmetric closely \gls{mzi} resembles the matrix transform of a beam splitter with flexible splitting ratio which is not surprising since the most general beam splitter is a two-dimensional unitary matrix and these form the closed special unitary group $\text{SU}(2)$ of which the component transforms are elements of.

Neglecting the phase modulation for now, we note that the amplitude modulation resembles a two-dimensional rotation of angle $\Theta/2=\phi_-/2$,
\begin{equation}
	R(\Theta/2)
	=
	\begin{pmatrix}
		\cos(\Theta/2) & \sin(\Theta/2) \\
		-\sin(\Theta/2) & \cos(\Theta/2)
	\end{pmatrix}
	.
\end{equation}
The unitary operator corresponding to the matrix rotation
\begin{equation}
	R(\Theta)
	\vb{\hat{a}}
	=
	\hat{R}^\dagger(\Theta)
	\vb{\hat{a}}
	\hat{R}(\Theta)
	=
	e^{-i\Theta\hat{L}_y}
	\vb{\hat{a}}
	e^{+i\Theta\hat{L}_y}
\end{equation}
is generated by the Jordan-Schwinger operator~\cite[p.~97]{Leonhardt2010}
\begin{equation}
	\hat{L}_y
	=
	\frac{1}{2}
	\vb{\hat{a}}^\dagger
	\sigma_y
	\vb{\hat{a}}
	=
	\frac{i}{2}
	\left(
		\hat{a}_2^\dagger
		\hat{a}_1
		-
		\hat{a}_1^\dagger
		\hat{a}_2
	\right)
	.
\end{equation}
The Jordan-Schwinger operators satisfy the angular momentum algebra and can be used to represent the different components of a unitary matrix transform as operators.

We finalize the discussion of the symmetric \gls{mzm} by considering the number and coherent state transformations.
We apply the rotation operator to the number and vacuum input state
\begin{equation}
	\begin{split}
		\hat{R}(\Theta/2)
		\ket{n,0}
		&=
		\frac{1}{\sqrt{n!}}
		\hat{R}(\Theta/2)
		\left(\hat{a}_1^\dagger\right)^n
		\hat{R}^\dagger(\Theta/2)
		\hat{R}(\Theta/2)
		\ket{0,0}
		\\
		&=
		\frac{1}{\sqrt{n!}}
		\left[
			\hat{R}(\Theta/2)
			\hat{a}_1^\dagger
			\hat{R}^\dagger(\Theta/2)
		\right]^n
		\ket{0,0}
		\\
		&=
		\frac{1}{\sqrt{n!}}
		\left(
			\left[
				\hat{R}(\Theta/2)
				\hat{a}_1
				\hat{R}^\dagger(\Theta/2)
			\right]^\dagger
		\right)^n
		\ket{0,0}
		\\
		&=
		\frac{1}{\sqrt{n!}}
		\left(
			\left[
				\hat{R}^\dagger(-\Theta/2)
				\hat{a}_1
				\hat{R}(\Theta/2)
			\right]^\dagger
		\right)^n
		\ket{0,0}
		\\
		&=
		\frac{1}{\sqrt{n!}}
		\left(
			\left[
				\cos(\Theta/2)
				\hat{a}_1
				-
				\sin(\Theta/2)
				\hat{a}_2
			\right]^\dagger
		\right)^n
		\ket{0,0}
		\\
		&=
		\frac{1}{\sqrt{n!}}
		\left(
			\cos(\Theta/2)
			\hat{a}_1^\dagger
			-
			\sin(\Theta/2)
			\hat{a}_2^\dagger
		\right)^n
		\ket{0,0}
	\end{split}
\end{equation}
and use the invariance of the vacuum state $\ket{0,0}$ under rotations in the second line.
We then use the binomial theorem
\begin{equation}
	\begin{split}
		\hat{R}(\Theta/2)
		\ket{n,0}
		&=
		\frac{1}{\sqrt{n!}}
		\left(
			\cos(\Theta/2)
			\hat{a}_1^\dagger
			-
			\sin(\Theta/2)
			\hat{a}_2^\dagger
		\right)^n
		\ket{0,0}
		\\
		&=
		\frac{1}{\sqrt{n!}}
		\sum_{m=0}^n
		\binom{n}{m}
		\cos(\Theta/2)^m
		\left(
			-\sin(\Theta/2)
		\right)^{n-m}
		\left(\hat{a}_1^\dagger\right)^m
		\left(\hat{a}_2^\dagger\right)^{n-m}
		\ket{0,0}
		\\
		&=
		\sum_{m=0}^n
		\binom{n}{m}^\frac{1}{2}
		(-1)^{n-m}
		\cos(\Theta/2)^m
		\sin(\Theta/2)^{n-m}
		\ket{n,n-m}
	\end{split}
\end{equation}
and find that the rotation to produce an entanglement.

As the number basis is complete, we can use the previous result to find the transformation property of a coherent and vacuum input state
\begin{equation}
	\begin{split}
		\hat{R}(\Theta)
		\ket{\alpha,0}
		&=
		e^{-\overline{n}/2}
		\sum_{n=0}^\infty
		\frac{\alpha^n}{\sqrt{n!}}
		\hat{R}(\Theta)
		\ket{n,0}
		\\
		&=
		e^{-\overline{n}/2}
		\sum_{n=0}^\infty
		\frac{1}{n!}
		\left(
			\alpha
			\cos(\Theta/2)
			\hat{a}_1^\dagger
			-
			\alpha
			\sin(\Theta/2)
			\hat{a}_2^\dagger
		\right)^n
		\ket{0,0}
		\\
		&=
		e^{-\overline{n}/2}
		\exp\left\{
			\alpha
			\cos(\Theta/2)
			\hat{a}_1^\dagger
			-
			\alpha
			\sin(\Theta/2)
			\hat{a}_2^\dagger
		\right\}
		\ket{0,0}
		\\
		&=
		e^{-\overline{n}\cos(\Theta/2)^2/2}
		\exp\left\{
			\alpha
			\cos(\Theta/2)
			\hat{a}_1^\dagger
		\right\}
		e^{-\overline{n}\sin(\Theta/2)^2/2}
		\exp\left\{
			-
			\alpha
			\sin(\Theta/2)
			\hat{a}_2^\dagger
		\right\}
		\ket{0,0}
		\\
		&=
		\hat{D}_1\left(
			\alpha
			\cos(\Theta/2)
		\right)
		\hat{D}_2\left(
			-
			\alpha
			\sin(\Theta/2)
		\right)
		\ket{0,0}
		\\
		&=
		\ket{\alpha\cos(\Theta/2),-\alpha\sin(\Theta/2)}
		.
	\end{split}
\end{equation}
A rotation splits the coherent input state among two coherent output states.
Tracing out one output of the \gls{mzm} for a coherent input state is equivalent to a projection
\begin{equation}
	\tr_2\left\{
		\hat{R}(\Theta)
		\ketbra{\alpha,0}
		\hat{R}^\dagger(\Theta)
	\right\}
	=
	\ketbra{\alpha\cos(\Theta/2)}
\end{equation}
but for an entangled state tracing out one output yields a mixed state!
We conclude that only coherent input states yield simple output states while number input states yield complex entangled output states.

Instead of using the number basis, we could have used that the coherent state is an eigenstate of the annihilation operator
\begin{equation}
	\hat{a}
	\ket{\alpha}
	=
	\alpha
	\ket{\alpha}
	.
\end{equation}
The same holds for a tensor product of coherent states which undergo unitary transformation
\begin{equation}
	\begin{split}
		\boldsymbol{\alpha}^\prime
		\ket{\boldsymbol{\alpha}^\prime}
		=
		\hat{\vb{a}}^\prime
		\ket{\boldsymbol{\alpha}^\prime}
		=
		\hat{U}
		\hat{\vb{a}}
		\hat{U}^\dagger
		\hat{U}
		\ket{\boldsymbol{\alpha}}
		=
		\hat{U}
		\hat{\vb{a}}
		\ket{\boldsymbol{\alpha}}
		=
		\boldsymbol{\alpha}
		\hat{U}
		\ket{\boldsymbol{\alpha}}
		=
		\boldsymbol{\alpha}
		\ket{\boldsymbol{\alpha}^\prime}
	\end{split}
\end{equation}
and comparing both sides, we find the complex quadratures of the coherent state to be related by the same unitary matrix transformation as the annihilation operators, i.e.,
\begin{equation}
	\boldsymbol{\alpha}^\prime
	=
	U
	\boldsymbol{\alpha}
	.
\end{equation}
We will take advantage of the quadrature transformation when discussion the \gls{iq}-modulator in the next section.

\subsection{In-phase and quadrature modulator}

\begin{figure}[htb]
	\centering
	\includestandalone{figures/pstricks/iqm}
	\caption{\gls{iq}-modulator comprising three \gls{mzm} and connected by an input and output fiber. MZM 1 and MZM 2, are used in push-pull configuration for \gls{am}. MZM 3 is used in push-push configuration for setting the relative phase between the upper and lower branch. Vacuum in- and outputs are indicated by the red dashed fiber.}
\end{figure}

\begin{equation}
	\begin{split}
		\begin{pmatrix}
			\hat{a}_1^{\prime\prime\prime} \\
			\hat{a}_2^{\prime\prime\prime} \\
			\hat{a}_3^{\prime\prime\prime} \\
			\hat{a}_4^{\prime\prime\prime}
		\end{pmatrix}
		&=
		\begin{pmatrix}
			 1 & 0 & 0 & 0 \\
			 0 & \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{BS2}$}} & 0 \\
			 0 & & & 0 \\
			 0 & 0 & 0 & 1
		\end{pmatrix}
		\begin{pmatrix}
			\hat{a}_1^{\prime\prime} \\
			\hat{a}_2^{\prime\prime} \\
			\hat{a}_3^{\prime\prime} \\
			\hat{a}_4^{\prime\prime}
		\end{pmatrix}
		\\
		&=
		\begin{pmatrix}
			 1 & 0 & 0 & 0 \\
			 0 & \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{BS2}$}} & 0 \\
			 0 & & & 0 \\
			 0 & 0 & 0 & 1
		\end{pmatrix}
		\begin{pmatrix}
			 \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{MZM1}$}} & 0 & 0 \\
			 & & 0 & 0 \\
			 0 & 0 & \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{MZM2}$}} \\
			 0 & 0 & & \\
		\end{pmatrix}
		\begin{pmatrix}
			\hat{a}_1^\prime \\
			\hat{a}_2^\prime \\
			\hat{a}_3^\prime \\
			\hat{a}_4^\prime
		\end{pmatrix}
		\\
		&=
		\begin{pmatrix}
			 1 & 0 & 0 & 0 \\
			 0 & \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{BS2}$}} & 0 \\
			 0 & & & 0 \\
			 0 & 0 & 0 & 1
		\end{pmatrix}
		\begin{pmatrix}
			 \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{MZM1}$}} & 0 & 0 \\
			 & & 0 & 0 \\
			 0 & 0 & \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{MZM2}$}} \\
			 0 & 0 & & \\
		\end{pmatrix}
		\begin{pmatrix}
			 1 & 0 & 0 & 0 \\
			 0 & \multicolumn{2}{c}{\multirow{2}{*}{$U_\text{BS1}$}} & 0 \\
			 0 & & & 0 \\
			 0 & 0 & 0 & 1
		\end{pmatrix}
		\begin{pmatrix}
			\hat{a}_1 \\
			\hat{a}_2 \\
			\hat{a}_3 \\
			\hat{a}_4
		\end{pmatrix}
	\end{split}
\end{equation}

\begin{equation}
	\vb{\hat{a}}^{\prime\prime\prime}
	=
	U_\text{IQM}
	=
	\left[
		\mathbb{I}_1
		\otimes
		U_\text{BS2}
		\otimes
		\mathbb{I}_1
	\right]
	\left[
		U_\text{MZM1}
		\otimes
		U_\text{MZM2}
	\right]
	\left[
		\mathbb{I}_1
		\otimes
		U_\text{BS1}
		\otimes
		\mathbb{I}_1
	\right]
	\vb{\hat{a}}
\end{equation}

\begin{equation}
	U_\text{BS1}(\varphi)
	=
	U_\text{BS2}(\varphi)
	=
	\frac{1}{\sqrt{2}}
	\begin{pmatrix}
		1 & ie^{+i\varphi} \\
		ie^{-i\varphi} & 1
	\end{pmatrix}
	=
	U_\text{BS}(\pi,\varphi)
\end{equation}
\begin{equation}
	\begin{split}
		U_\text{MZM1}(\phi_{1+},\phi_{1-})
		&=
		e^{i\pi}
		U_\text{BS}(\pi,0)
		U_\text{MZM}(\phi_{1+},\phi_{1-})
		U_\text{BS}(\pi,0)
		\\
		&=
		\begin{pmatrix}
			0 & i \\
			i & 0
		\end{pmatrix}
		e^{i\phi_{1+}/2}
		\begin{pmatrix}
			\cos(\phi_{1-}/2) & \sin(\phi_{1-}/2) \\
			-\sin(\phi_{1-}/2) & \cos(\phi_{1-}/2)
		\end{pmatrix}
		\begin{pmatrix}
			0 & i \\
			i & 0
		\end{pmatrix}
		\\
		&=
		-
		e^{i\phi_{1+}/2}
		\begin{pmatrix}
			\cos(\phi_{1-}/2) & -\sin(\phi_{1-}/2) \\
			\sin(\phi_{1-}/2) & \cos(\phi_{1-}/2)
		\end{pmatrix}
	\end{split}
\end{equation}
We choose $\phi_{1+}=2\pi$ to compensate for the phase shift and $\Theta_1=\phi_{1-}$.
\begin{equation}
	U_\text{MZM1}(\Theta_1)
	=
	\begin{pmatrix}
		\cos(\Theta_1/2) & -\sin(\Theta_1/2) \\
		\sin(\Theta_1/2) & \cos(\Theta_1/2)
	\end{pmatrix}
	=
	R(-\Theta_1)
\end{equation}
\begin{equation}
	U_\text{MZM2}(\phi_{2+},\phi_{2-})
	=
	e^{i\phi_{2+}/2}
	\begin{pmatrix}
		\cos(\phi_{2-}/2) & \sin(\phi_{2-}/2) \\
		-\sin(\phi_{2-}/2) & \cos(\phi_{2-}/2)
	\end{pmatrix}
\end{equation}
where we choose $\phi_{2+}=-\pi$ and $\Theta_2=\phi_{2-}$ such that
\begin{equation}
	U_\text{MZM2}(\Theta_2)
	=
	-i
	\begin{pmatrix}
		\cos(\Theta_1/2) & \sin(\Theta_1/2) \\
		-\sin(\Theta_1/2) & \cos(\Theta_1/2)
	\end{pmatrix}
	=
	-i
	R(\Theta_2)
\end{equation}

\begin{equation}
	\begin{split}
		U_\text{IQM}(\Theta_1,\Theta_2,\varphi)
		=
		\begin{pmatrix}
			c_1 & -\frac{1}{\sqrt{2}}s_1 & -\frac{1}{\sqrt{2}}e^{+i\varphi}s_1 & 0 \\
			\frac{1}{\sqrt{2}}s_1 & \frac{1}{2}(c_1+ic_2) & \frac{1}{2}e^{i\varphi}(ic_1+c_2) & \frac{1}{\sqrt{2}}e^{i\varphi}s_2 \\
			\frac{1}{\sqrt{2}}ie^{-i\varphi}s_1 & \frac{1}{2}e^{-i\varphi}(ic_1+c_2) & -\frac{1}{2}(c_1+ic_2) & -\frac{1}{\sqrt{2}}is_2 \\
			0 & -\frac{1}{\sqrt{2}}e^{-i\varphi}s_2 & \frac{1}{\sqrt{2}}is_2 & -ic_2
		\end{pmatrix}
	\end{split}
\end{equation}
\begin{align}
	c_j
	&=
	\cos(\Theta_j/2)
	&
	s_j
	&=
	\sin(\Theta_j/2)
\end{align}
\begin{equation}
	\begin{pmatrix}
		\alpha_1^{\prime\prime\prime} \\
		\alpha_2^{\prime\prime\prime} \\
		\alpha_3^{\prime\prime\prime} \\
		\alpha_4^{\prime\prime\prime}
	\end{pmatrix}
	=
	U_\text{IQM}(\Theta_1,\Theta_2,\varphi)
	\begin{pmatrix}
		0 \\
		\alpha \\
		0 \\ 
		0
	\end{pmatrix}
	=
	\frac{\alpha}{\sqrt{2}}
	\begin{pmatrix}
		-\sin(\Theta_1/2) \\
		\frac{1}{\sqrt{2}}\left(\cos(\Theta_1/2)+i\cos(\Theta_2/2)\right) \\
		\frac{1}{\sqrt{2}}\left(i\cos(\Theta_1/2)+\cos(\Theta_2/2)\right)e^{-i\varphi} \\
		-\sin(\Theta_2/2)e^{-i\varphi}
	\end{pmatrix}
\end{equation}
tracing out the other modes is equivalent to projecting the second mode if we only deal with coherent states
\begin{equation}
	\hat{P}_2
	U_\text{IQM}(\Theta_1,\Theta_2,\varphi)
	\ket{0,\alpha,0,0}
	=
	\ket{\frac{1}{2}\alpha\left(\cos(\Theta_1/2)+i\cos(\Theta_2/2)\right)}
\end{equation}
which is independent of $\varphi$ does we don't care about the specific phase properties of BS1 and BS2 as long as they are symmetric.

For $\alpha=e^{-i\omega_ct}$ and $\Theta_j\to\Theta_j-\pi$, we find
\begin{equation}
	\hat{P}_2
	U_\text{IQM}(\Theta_1,\Theta_2)
	\ket{0,e^{-i\omega_ct},0,0}
	=
	\ket{\frac{1}{2}\left(\sin(\Theta_1/2)+i\sin(\Theta_2/2)\right)e^{-i\omega_ct}}
\end{equation}
for small modulation $\Theta_1,\Theta_2\ll1$ the small-angle approximation yields
\begin{equation}
	\hat{P}_2
	U_\text{IQM}(\Theta_1,\Theta_2)
	\ket{0,e^{-i\omega_ct},0,0}
	\approx
	\ket{\alpha e^{-i\omega_ct}}
\end{equation}
where we identified
\begin{equation}
	\alpha
	=
	\frac{1}{4}
	\left(\Theta_1+i\Theta_2\right)
\end{equation}
with the complex baseband signal.

% mention number states
% mention generator transform

\subsection{Pockels modulator}

% figure (?): what time scales are there, what area of physics do they belong to, are these relevant (?)
% non-vanishing commutators inside the light-cone (QFT), see Tohen-Canoudji
% effective potential in the interaction encoding time effects
% time-dependency of these effects

% discussion of Pockels effect
From a purely phenomenological point of view, the Pockels effect - also known as the linear electro-optical effect - describes a linear change of the refractive index of a dielectric material in the presence of an external electric field $E$, i.e.,
\begin{equation}
	n(E)
	=
	n^{(0)}
	+
	n^{(1)}E
\end{equation}
wherein $n^{(0)}=n(0)$ is the refractive index without an external field and $n^{(1)}$ is a proportionality constant.
One way to create the external electric field $E$ is to place the Pockels dielectric inside a plate capacitor and apply a voltage $V$ to the plates.
Neglecting boundary effects, we find a homogeneous static electric field between the plates of $E=V/d$ where $d$ is the plate distance.
Such a configuration is known as Pockels cell and depicted in \Cref{fig:pockels_cell} where the field inside the Pockels cell is labeled $E_x(t)$.
\begin{figure}[htb]
    \centering
    \includegraphics{figures/tikz/pockels-cell}
    \caption{Pockels cell of length $l$ and thickness $d$ embedded in a waveguide with constant dielectric permittivity $\varepsilon_1$: The dielectric permittivity of the Pockels cell $\varepsilon_2(t)$ depends on the electric field $E_x(t)$ across the Pockels cell plates. The optical field $E_z(t)$ enters the Pockels cell from the left and leaves it to the right as $E^\prime_z(t)$.}\label{fig:pockels_cell}
\end{figure}
Let us first consider a monochromatic electromagnetic wave of frequency $\omega_0$ propagating through a dielectric of length $l$ with refractive index $n_1^{(0)}=\sqrt{\varepsilon_1}$.
Inside the dielectric, the wave propagates with phase velocity $c/n_1^{(0)}$ and takes $T_1=ln_1^{(0)}/c$ to pass through the dielectric.
Directly after the transit, the wave accumulated a total phase shift of
\begin{equation*}
	\phi_1
	=
	\omega_0T_1
	=
	2\pi\frac{n_1^{(0)}l}{\lambda_0}
\end{equation*}
where $\lambda_0=c/f$ is the vacuum wave length.
If we now consider the same monochromatic electromagnetic wave propagating through a Pockels cell of the same length $l$ but without applied voltage, the wave would accumulate a phase shift of
\begin{equation}
	\phi_2
	=
	\omega_0T_2
	=
	2\pi\frac{n_2^{(0)}l}{\lambda_0}
	.
\end{equation}
So even when there is no electric field inside the Pockels cell, we find a phase difference of
\begin{equation}
	\Delta\phi
	=
	\phi_2
	-
	\phi_1
	=
	2\pi\frac{n_2^{(0)}-n_1^{(0)}}{\lambda_0}l
\end{equation}
because of the different dielectric constants of the materials.
If we apply a voltage to the Pockels cell, the refractive index of the Pockels dielectric contributes a second phase shift of
\begin{equation}
	\varphi_2
	=
	2\pi\frac{n_2^{(1)}E}{\lambda_0}l
\end{equation}
and the total phase difference is $\varphi_2+\Delta\phi$.
Extending our discussion to wave packets in dispersive media, we need to replace the phase velocity $v_p$ with the group velocity $v_g$.
The group velocity can be expressed in terms of the refractive index via~\cite[p.~211]{Jackson2007}
\begin{equation}
	v_g(\omega_0)
	=
	\left[
		n
		+
		\omega
		\pdv{n}{\omega}
	\right]^{-1}_{\omega=\omega_0}
\end{equation}
where $\omega_0$ is the center frequency of the wave packet.
The concept of group velocity can be extended to quantum states, see, for instance, Ref.~\cite[p.~3]{Naumov2013}.
We refrain from a further discussion which would require specific knowledge of the wave packet's pulse shape and frequency-dependency of the refractive index and is best simulated using finite element methods.

Thus far, we have treated a static electric field in the Pockels cell.
We are now going to extend our model to allow for time-dependent electric field inside the Pockels cell and justify why we can treat the time-dependency of the modulation field to be effectively static.
An external electric field induces a dipole moment in the constituents of a dielectric.
The average dipole moment per volume is referred to the macroscopic polarization $\vb{P}$.
Assuming the dielectric to be a time-invariant system, i.e., to be memoryless, we can expand each component of the macroscopic polarization $P^i$ up to second-order in terms of electric susceptibility tensors $\chi$~\cite[p.~17]{Murti2014}
\begin{equation}
	P_i(t)
	=
	\int_{\mathbb{R}}\dd{t^\prime}
	\chi^{(1)}_{ij}(t-t^\prime)
	E^j(t^\prime)
	+
	\iint_{\mathbb{R}^2}\dd{t^\prime}\dd{t^{\prime\prime}}
	\chi^{(2)}_{ijk}(t-t^\prime,t-t^{\prime\prime})
	E^j(t^\prime)E^k(t^{\prime\prime})
\end{equation}
where causality demands $\chi^{(n)}(t-t^\prime)=0$ for $t^\prime>t$.
Inserting the Fourier representation, we find
\begin{align}
	P_i^{(1)}(t)
	&=
	\int_{\mathbb{R}}
	\frac{\dd{\omega_1}}{2\pi}
	\chi^{(1)}_{ij}(\omega_1)
	E^j(\omega_1)
	e^{+i\omega_1t}
	\\
	P_i^{(2)}(t)
	&=
	\iint_{\mathbb{R}^2}
	\frac{\dd{\omega_1}}{2\pi}
	\frac{\dd{\omega_2}}{2\pi}
	\chi^{(2)}_{ijk}(\omega_1,\omega_2)
	E^j(\omega_1)E^k(\omega_2)
	e^{+i(\omega_1+\omega_2)t}	
\end{align}
for the first two terms of the expansion.
The inverse Fourier transform yields the macroscopic polarization in the frequency domain~\cite[p.~1070]{Mandel1995} yields for the first term
\begin{equation}
	P_i^{(1)}(\omega)
	=
	\int\dd{\omega^\prime}
	\chi^{(1)}_{ij}(\omega^\prime)
	E^j(\omega^\prime)
	\delta^{(1)}(\omega-\omega^\prime)
	=
	\chi^{(1)}_{ij}(\omega)
	E^j(\omega)
\end{equation}
which we will later identify as part of the constant refractive index with $E^j$ being the optical field passing through the Pockels cell
For the second term we find
\begin{equation}
	\begin{split}
		P_i^{(2)}(\omega)
		&=
		\iint\frac{\dd{\omega^\prime}\dd{\omega^{\prime\prime}}}{2\pi}
		\chi^{(2)}_{ijk}(\omega^\prime,\omega^{\prime\prime})
		E^j(\omega^\prime)
		E^k(\omega^{\prime\prime})
		(2\pi)	
		\delta^{(1)}(\omega-\omega^\prime-\omega^{\prime\prime})
		\\
		&=
		\int\frac{\dd{\omega^\prime}}{2\pi}
		\chi^{(2)}_{ijk}(\omega-\omega^\prime,\omega^\prime)
		E^j(\omega-\omega^\prime)
		E^k(\omega^\prime)
	\end{split}
\end{equation}
where we will later identify $E^k$ to be the radio frequency field driving the Pockels cell.
The specific form indicates the presence of frequency sidebands by modulation.
Let's assume radio frequency field $E^k$ to have non-zero support, i.e., bandwidth, $\Delta\Omega$, then according to the mean value theorem
\begin{equation}
	\begin{split}
		P_i^{(2)}(\omega)
		&=
		\int_{\Delta\Omega}\frac{\dd{\omega^\prime}}{2\pi}
		\chi^{(2)}_{ijk}(\omega-\omega^\prime,\omega^\prime)
		E^j(\omega-\omega^\prime)
		E^k(\omega^\prime)
		\\
		&=
		\frac{\Delta\Omega}{2\pi}
		\chi^{(2)}_{ijk}(\omega-\Omega_0,\Omega_0)
		E^j(\omega-\Omega_0)
		E^k(\Omega_0)
	\end{split}
\end{equation}
where $\Omega_0$ is the mean frequency of $E^k$.
Restricting $P_i(\omega)$ to the optical domain, we have $\omega\gg\Omega_0$ which let's us Taylor expand $E^j(\omega-\Omega_0)$ around $\omega$, i.e.,
\begin{equation}
	P_i^{(2)}(\omega)
	\approx
	\frac{\Delta\Omega}{2\pi}
	\chi^{(2)}_{ijk}(\omega,\Omega_0)
	\left(
		E^j(\omega)
		+
		\pdv{E^j}{\omega}(\omega)\Omega_0
	\right)
	E^k(\Omega_0)
\end{equation}
where we assumed a flat response $\pdv{\chi_{ijk}^{(2)}}{\Omega_0}\approx0$.
Finally, we redefine the electric susceptibility tensor such that
\begin{equation}
	P_i(\omega)
	\approx
	\left(
		\tilde{\chi}^{(1)}_{ij}(\omega)
		+
		\tilde{\chi}^{(2)}_{ijk}(\omega)
		E^k(\Omega_0)
	\right)
	E^j(\omega)
\end{equation}
which is valid if $\omega$ is an optical frequency.
The dielectric permittivity tensor $\varepsilon_{ij}$ is defined implicitly through the displacement field
\begin{equation}
	D_i(\omega)
	=
	E_i(\omega)
	+
	P_i(\omega)
	=
	\varepsilon_{ij}(\omega)
	E^j(\omega)
\end{equation}
and we identify by comparison the dielectric permittivity tensor to relate to the electric susceptibility by
\begin{equation}
	\varepsilon_{ij}(\omega)
	=
	1
	+
	\tilde{\chi}^{(1)}_{ij}(\omega)
	+
	\tilde{\chi}^{(2)}_{ijk}(\omega)
	E^k(\Omega_0)
	.
\end{equation}
The refractive index tensor for a dielectric, non-magnetic and non-chiral medium is given after a series expansion by~\cite{Rerat2020}
\begin{equation}
	n_{ij}(\omega)
	=
	\sqrt{\varepsilon_{ij}(\omega)}
	\approx
	n^{(0)}_{ij}(\omega)
	+
	n^{(1)}_{ijk}(\omega)
	E^k(\Omega_0)
\end{equation}
where we defined the refractive index tensors
\begin{align}
	n^{(0)}_{ij}(\omega)
	=
	\sqrt{1+\tilde{\chi}^{(1)}_{ij}(\omega)}
	&&
	n^{(1)}_{ijk}(\omega)
	=
	\frac{\tilde{\chi}^{(2)}_{ijk}(\omega)
	E^k(\Omega_0)}{2\sqrt{1+\tilde{\chi}^{(1)}_{ij}(\omega)}}
\end{align}
which recovers the linear electro-optical effect we first discussed in the phenomenological approach.
For the Pockels cell depicted in \Cref{fig:pockels_cell}, the refractive index relevant for the optical field takes the explicit form
\begin{equation}
	n_{zz}(\omega)
	\approx
	n^{(0)}_{zz}(\omega)
	+
	n^{(1)}_{zzx}(\omega)
	E^x(\Omega_0)
	.
\end{equation}
For practical Pockels media, e.g., Lithium-Niobate, the tensorial \gls{dof} can be substantially reduced by considering crystal symmetries, see, for instance, Ref.~\cite[p.~237]{Yariv1984}.

We derived the relation between the macroscopic polarization, response and refractive index and justified why we can treat the modulation field to be effectively static compared to the fast oscillating optical field.
For the last step where we summarize the unitary transformation associated with a Pockels phase modulator, we assume the dielectric to be constant on the time scale of the electrical field.
