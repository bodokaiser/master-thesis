\documentclass[tikz]{standalone}

\input{preamble}

\begin{document}
	\begin{tikzpicture}
		\begin{groupplot}[
			group style={
				group name=plot,
				group size=1 by 5,
				xlabels at=edge bottom,
				xticklabels at=edge bottom,
%				vertical sep=2ex,
			},
			grid=major,
			width=\linewidth,
			height=24ex,
			xlabel={Frequency $f/f_s$},
%			yticklabels={},
			ylabel={Power spectral\\density (\si{\decibel})},
			ylabel style={align=center},
			axis line style={thick},
			cycle list name=exotic,
		]
			\nextgroupplot[
				title={$\alpha[km],x[km]$ encoding symbols},
				xmin=-4,
				xmax=4,
				xtick distance=0.5,
				ymin=-60,
				ymax=5,
			]
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/rand-freq-tx-sym.csv};
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/unit-freq-tx-sym.csv};
			\nextgroupplot[
				title={$\rho[m],r[m]$ after upsampling $\alpha[km],x[km]$},
				xmin=-4,
				xmax=4,
				xtick distance=0.5,
				ymin=-60,
				ymax=5,
%				ylabel={Upsampling\\$\rho[m],r[m]$},
			]
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/rand-freq-tx-up.csv};
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/unit-freq-tx-up.csv};
			\nextgroupplot[
				title={$\gamma[m],q[m]$ after pulse-shaping $\rho[m],r[m]$},
				xmin=-4,
				xmax=4,
				xtick distance=0.5,
				ymin=-60,
				ymax=5,
%				ylabel={Pulse-shaping\\$\gamma[m],q[m]$},
			]
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/rand-freq-tx-rrc.csv};
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/unit-freq-tx-rrc.csv};
			\nextgroupplot[
				title={$\gamma(t),q(t)$ after analog converting $\gamma[m],q[m]$},
				xmin=-4,
				xmax=4,
				xtick distance=0.5,
				ymin=-60,
				ymax=5,
				%ylabel={Analog-conv.\\$\gamma(t),q(t)$},
			]
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/rand-freq-tx-dac.csv};
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/unit-freq-tx-dac.csv};
			\nextgroupplot[
				title={$\alpha(t),x(t)$ after anti-aliasing $\gamma(t),q(t)$},
				xmin=-4,
				xmax=4,
				xtick distance=0.5,
				ymin=-60,
				ymax=5,
				%ylabel={Anti-aliasing\\$\alpha(t),x(t)$},
			]
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/rand-freq-tx-lp.csv};
			\addplot+[
				very thick,
				no markers,
			] plot table[col sep=comma] {../../../data/unit-freq-tx-lp.csv};
		\end{groupplot}
	\end{tikzpicture}
\end{document}